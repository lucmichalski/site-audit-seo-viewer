(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{770:function(e,t,n){var content=n(786);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("3192d0d4",content,!0,{sourceMap:!1})},772:function(e,t,n){var content=n(788);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("42ac78e2",content,!0,{sourceMap:!1})},773:function(e,t,n){var content=n(793);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("345ba3fc",content,!0,{sourceMap:!1})},774:function(e,t,n){var content=n(795);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("40ec8546",content,!0,{sourceMap:!1})},775:function(e,t,n){var content=n(797);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("4479e502",content,!0,{sourceMap:!1})},776:function(e,t,n){var content=n(799);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("252978e2",content,!0,{sourceMap:!1})},777:function(e,t,n){var content=n(801);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("6bb35ec2",content,!0,{sourceMap:!1})},778:function(e,t,n){var content=n(804);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("56f7ce62",content,!0,{sourceMap:!1})},779:function(e,t,n){var content=n(811);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(38).default)("224406da",content,!0,{sourceMap:!1})},783:function(e,t){},785:function(e,t,n){"use strict";var r=n(770);n.n(r).a},786:function(e,t,n){(t=n(37)(!1)).push([e.i,".filter-presets__button{outline:none;background:none;border:1px solid transparent;padding:5px;margin-right:1em;color:rgba(255,0,0,.87)}@media (max-width:1000px){.filter-presets__button{padding:5px}}.filter-presets__button_active{border:1px solid}.filter-presets__button_inactive{opacity:.5}",""]),e.exports=t},787:function(e,t,n){"use strict";var r=n(772);n.n(r).a},788:function(e,t,n){(t=n(37)(!1)).push([e.i,".available-fields__field.clicked{background:#ffa}.field-preset.filter-presets__button{font-size:10px;color:#999}.field-preset.filter-presets__button_active{color:red;border:none}",""]),e.exports=t},792:function(e,t,n){"use strict";var r=n(773);n.n(r).a},793:function(e,t,n){(t=n(37)(!1)).push([e.i,".el-autocomplete-suggestion{min-width:360px}.el-autocomplete-suggestion .el-scrollbar__bar.is-horizontal{display:none}.el-tag{margin:0 5px}",""]),e.exports=t},794:function(e,t,n){"use strict";var r=n(774);n.n(r).a},795:function(e,t,n){(t=n(37)(!1)).push([e.i,".query-input input{min-width:85px;font-family:monospace}.query-input__field-name{font-weight:700;font-size:12px}.query-input__field-label{margin-left:10px;color:#999}.el-autocomplete-suggestion{min-width:360px}.el-autocomplete-suggestion__wrap{padding:0;max-height:60vh}.el-autocomplete-suggestion li{padding:0 5px;font-size:10px;line-height:1.5rem}.el-tag{margin:0 5px}",""]),e.exports=t},796:function(e,t,n){"use strict";var r=n(775);n.n(r).a},797:function(e,t,n){(t=n(37)(!1)).push([e.i,".VueTables__child-row{background:none!important}",""]),e.exports=t},798:function(e,t,n){"use strict";var r=n(776);n.n(r).a},799:function(e,t,n){(t=n(37)(!1)).push([e.i,".panels__panel .panel__title{margin-left:10px}",""]),e.exports=t},800:function(e,t,n){"use strict";var r=n(777);n.n(r).a},801:function(e,t,n){(t=n(37)(!1)).push([e.i,'.table-stats{padding:15px 0;text-align:left}.table-stats ul{padding-left:0}.table-stats__field{margin-bottom:5px}@media (max-width:640px){.table-stats__field{margin-bottom:30px}}.table-stats .success{color:#407927}.table-stats .warning{color:#a09600}.table-stats .danger{color:#94070a}.table-stats .item-details__subvalue:hover{background:#eee}.table-stats .item-details__subvalue.warning:after{content:"⚠";margin-left:15px;float:right}.table-stats .item-details__subvalue.danger:after{content:"❌";margin-left:15px;float:right}.table-stats .item-details__subvalue-text{display:inline-block;min-width:100px}',""]),e.exports=t},803:function(e,t,n){"use strict";var r=n(778);n.n(r).a},804:function(e,t,n){(t=n(37)(!1)).push([e.i,".report-history__sort{margin:4px 3px 0 0}.report-history__sort .el-radio-button__orig-radio:checked+.el-radio-button__inner{background-color:#ccc;border-color:#ccc;box-shadow:-1px 0 0 0 #ccc}.report-history__select{min-width:300px}@media (min-width:600px){.report-history__select{min-width:500px}}.report-history__select input{padding-left:5px}.report-history__option{max-width:98vw}.report-history__value-name{float:left}.report-history__value-date{float:right;color:#8492a6;font-size:13px}@media (max-width:640px){.report-history__value-date{display:none}}.report-history button{background:none;border:none}",""]),e.exports=t},808:function(e,t){},809:function(e,t){},810:function(e,t,n){"use strict";var r=n(779);n.n(r).a},811:function(e,t,n){(t=n(37)(!1)).push([e.i,'header{min-height:37px}.container{min-height:100vh;display:block;justify-content:center;align-items:center;text-align:center}.msg.danger{color:#f56c6c}.display-mode-switch,.help-tour-button{float:left;margin:4px 3px 6px 0}.filter__query{padding:5px 0;min-width:70px;font-size:18px;font-family:monospace;margin-top:15px}.filter__query,.vue-title,.VuePagination{text-align:center}.vue-title{margin-bottom:10px}.vue-pagination-ad{text-align:center}.glyphicon.glyphicon-eye-open{width:16px;display:block;margin:0 auto}@media (max-width:1000px){.el-dropdown-menu.el-popper{display:none}}.el-dropdown-menu__item{padding:0}.panels{margin-top:15px}.panels .el-collapse-item__header{height:32px;line-height:32px}.panels .el-collapse-item__header.is-active{font-weight:700}.panels .el-collapse-item__arrow{margin:0 8px 0 15px}.available-fields{margin:0 auto;text-align:left;-moz-columns:3;column-count:3;max-width:1900px}@media (min-width:1800px){.available-fields{-moz-columns:4;column-count:4}}@media (max-width:1200px){.available-fields{-moz-columns:2;column-count:2}}@media (max-width:1000px){.available-fields{-moz-columns:2;column-count:2}}@media (max-width:539px){.available-fields{-moz-columns:1;column-count:1}}.available-fields .field-group{padding:0 3px}.available-fields .field-group:hover{background:#fbfbfb}.available-fields .field-group__header{margin-top:15px;margin-bottom:5px}.available-fields .field-group__header input[type=checkbox],.available-fields .field-group__header input[type=radio]{margin-left:-18px}.available-fields .field-group__name{margin-left:5px;font-size:1.2rem;color:#222;font-weight:700}.available-fields__field{opacity:.7;margin-left:32px}.available-fields__field.active{opacity:1}.available-fields__field input[type=checkbox],.available-fields__field input[type=radio]{margin-left:-18px}.available-fields__field label{font-weight:400;margin-left:5px;vertical-align:top;display:inline}.available-fields .field-add-input{margin-top:15px}.column-presets__button{background:none;border:none;border-bottom:1px dashed;padding:0;margin-right:1em;font-weight:400}@media (max-width:1000px){.column-presets__button{padding:5px}}.column-presets__button_active{font-weight:700}.column-presets__button_icon{border-bottom:none}.column-presets__button_icon span{border-bottom:1px dashed}.current-columns .available-fields__field{display:inline-block;margin:0 5px}.item-details{max-width:100vw;overflow-x:auto}.item-details__groups{padding:0}.item-details__groups-link{display:inline-block;padding:10px}.item-details .field-preset{margin-left:15px}.item-details li{list-style:none;padding:0}.item-details li:hover{background:#fbfbfb}.item-details li .item-details__label{vertical-align:top}.item-details li.secondary{opacity:.3}.item-details li.secondary:hover{opacity:1}.item-details li .item-details__value{min-width:75px;display:inline-block}.item-details li.danger .item-details__value:after,.item-details li.success .item-details__value:after,.item-details li.warning .item-details__value:after{margin-left:15px;float:right}.item-details li.success .item-details__value{color:#407927}.item-details li.warning:not(.item-details__value_has-subvalues) .item-details__value{color:#a09600}.item-details li.warning:not(.item-details__value_has-subvalues) .item-details__value:not(.item-details__value_has-subvalues):after{content:"⚠"}.item-details li.danger:not(.item-details__value_has-subvalues) .item-details__value{color:#94070a}.item-details li.danger:not(.item-details__value_has-subvalues) .item-details__value:after{content:"❌"}.item-details li:hover.success{background:#cfc}.item-details li:hover.warning{background:#ffc}.item-details li:hover.danger{background:#fcc}.item-details__title{font-size:1.5rem}.item-details__group{margin-bottom:15px;margin-top:50px}.item-details__group:target{padding:75px 15px 15px;background:#feffba}.item-details__group-name{font-size:1.2rem;font-weight:700}.item-details__group-fields{padding:0}.item-details__label{display:inline-block;width:290px}@media (max-width:400px){.item-details__label{width:auto;margin-right:.5em;color:#999}.item-details__label:after{content:":"}}.table-actions{text-align:right;margin-bottom:-10px}.table-actions .btn-excel{color:green}.VueTables{margin-top:15px}.VueTables__sortable{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.VueTables__limit-field label,.VueTables__search-field label{margin-right:1em;border:none}.VueTables__search-field .form-control{border:none;box-shadow:none}.VueTables__child-row{text-align:left}.VueTables .table-responsive{overflow-x:visible}@media screen and (max-width:767px){.VueTables .table-responsive{overflow-y:visible}}.VueTables th{position:-webkit-sticky;position:sticky;top:0;box-shadow:0 0 3px #ccc}.VueTables .VueTables__child-row-toggler{position:absolute;top:0;right:0;bottom:0;left:0}.VueTables__child-row-toggler{width:18px;height:30px;line-height:30px;display:block;margin:auto;text-align:center;cursor:pointer}.VueTables__child-row-toggler--closed:before{content:"+"}.VueTables__child-row-toggler--open:before{content:"-"}@media (max-width:768px){.VueTables .table-responsive{margin:0 -15px;width:auto}}.VueTables__table{position:relative;overflow:auto!important}.VueTables__table th{background:#fff;position:-webkit-sticky!important;position:sticky!important;top:0;z-index:2}.VueTables__table td{position:relative}.VueTables__table td.cell{padding:8px 2px}.VueTables__table td.align-left{text-align:left}.VueTables__table td.align-center{text-align:center}.VueTables__table td.align-right{text-align:right}.VueTables__table td .float-right{float:right}.VueTables__table .col-title{text-align:right}@media (min-width:800px){.VueTables__table .col-default{position:-webkit-sticky;position:sticky;left:0;z-index:1;background:#fff;max-width:20vw}.VueTables__table .col-default div{z-index:2;background:#fff;overflow:hidden}.VueTables__table .col-default div:hover{overflow:visible}.VueTables__table th.col-default{z-index:2}}.mode-view header .total{display:none}',""]),e.exports=t},812:function(e,t,n){"use strict";n.r(t);n(57),n(59),n(58),n(41),n(42),n(112),n(40),n(263),n(113),n(784),n(39),n(16),n(81),n(60);var r=n(7),o=(n(159),n(161),n(79),n(80),n(27),n(265),n(32)),l=n(35);function c(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var f,m={props:{preset:Object,append:{type:Boolean,default:!1},toggle:{type:Boolean,default:!1},noCount:{type:Boolean,default:!1}},data:function(){return{filterCount:""}},computed:{filterCounter:function(){if(this.noCount)return"";if(this.preset.q.match(/=$/))return"";var e=this.getFilterCount();return 1===e?"unique":"("+e+")"}},methods:{isActive:function(q){return this.$store.state.q.includes(q)},isInactive:function(q){var e,t=this,n=c(this.parseQuery(q));try{var r=function(){var p=e.value;if(!!!t.$store.state.availableFields.find((function(e){return e.name==p.name})))return{v:!0}};for(n.s();!(e=n.n()).done;){var o=r();if("object"===Object(l.a)(o))return o.v}}catch(e){n.e(e)}finally{n.f()}return 0===this.filterCount},parseQuery:function(q){var e=q.split("&");return e=e.map((function(e){var t=e.match(/(.*?)\s*([!<=>~]+)\s*(.*)/);if(t)return{name:t[1],op:t[2],value:t[3]}})).filter((function(e){return void 0!==e}))},togglePreset:function(q){var e=this.parseQuery(q),t=this.parseQuery(this.$store.state.q);return e.forEach((function(e){var n=t.findIndex((function(t){return t.name==e.name}));-1==n?t.push(e):t.splice(n,1)})),t.map((function(e){return e.name+e.op+e.value})).join("&")},mergePreset:function(q){if(q||(q=""),!this.append)return this.toggle&&(q=this.togglePreset(q)),q;var e=this.$store.state.q?this.$store.state.q.split("&"):[];return e.push(q),e.join("&")},setPreset:function(){var q=this.mergePreset(this.preset.q);this.$store.dispatch("q",q),this.$nuxt.$emit("inputFocus"),this.preset.sort&&this.$nuxt.$emit("sort",this.preset.sort)},getFilterCount:function(){var q=this.mergePreset(this.preset.q),e=this.$store.getters.getFilteredItems(q);return this.filterCount=e.length,this.filterCount}}},h=(n(785),n(28)),_=Object(h.a)(m,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{staticClass:"filter-presets__button",class:{"filter-presets__button":!0,"filter-presets__button_active":e.isActive(e.preset.q),"filter-presets__button_inactive":e.isInactive(e.preset.q)},attrs:{title:"Filter:\n"+e.preset.q},on:{click:e.setPreset}},[e._t("default",[e._v(e._s(e.preset.name))]),e._v("\n  "+e._s(e.filterCounter)+"\n")],2)}),[],!1,null,null,null).exports,v={props:["preset"],methods:{arraysEqual:function(a,b){return!!a&&!!b&&!(a<b||b<a)},isActive:function(){var e=this.$store.state.fields.map((function(e){return e.name}));return this.arraysEqual(this.preset.columns,e)}}},y=Object(h.a)(v,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("button",{class:{"column-presets__button":!0,"column-presets__button_active":e.isActive()},attrs:{title:"Columns:\n"+e.preset.columns.join("\n")},domProps:{innerHTML:e._s(e.preset.name)},on:{click:function(t){return e.$emit("click",e.preset)}}})}),[],!1,null,null,null).exports,x=(n(771),{components:{FilterPresetButton:_},props:["field","checked"],methods:{click:function(){this.$refs.component.classList.add("clicked"),this.$emit("click",this.field)}},computed:{title:function(){return this.field.name+(this.field.comment?" \n\n".concat(this.field.comment):"")+(this.field.command?" \n\n".concat(this.field.command):"")+(this.field.description?" \n\n".concat(this.field.description):"")}}}),w=(n(787),Object(h.a)(x,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"component",staticClass:"available-fields__field",attrs:{title:e.title}},[n("input",{attrs:{type:"checkbox"},domProps:{checked:e.checked},on:{click:e.click}}),e._v(" "),n("label",{on:{click:e.click}},[e._v(e._s(e.field.comment||e.field.title))]),e._v(" "),n("FilterPresetButton",{staticClass:"field-preset",attrs:{preset:{q:e.field.name+"="},append:""}},[n("icon",{attrs:{name:"filter",scale:"0.6"}})],1)],1)}),[],!1,null,null,null).exports),$={components:{FilterPresetButton:_,ColumnPresetButton:y,ColumnField:w},props:["group","opened"],data:function(){return{}},computed:{columnPresets:function(){return this.$store.state.columnPresets},filterPresets:function(){return this.$store.state.filterPresets},groupChecked:function(){var e=this,t=!0;return this.group.fields.forEach((function(n){e.$store.getters.fieldExists(n)||(t=!1)})),t}},methods:{setPreset:function(e){this.$emit("setPreset",e)},changeGroupOpened:function(){this.$emit("changeGroupOpened")}}},C=Object(h.a)($,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"field-group",attrs:{id:"filter-"+e.group.name}},[n("div",{staticClass:"field-group__header"},[n("input",{attrs:{type:"checkbox",title:"Columns:\n"+e.group.fields.map((function(e){return e.comment})).join("\n")},domProps:{checked:e.groupChecked},on:{click:function(t){e.setPreset({name:"all",columns:[e.$store.state.defaultField].concat(e.group.fields.map((function(e){return e.name})))})}}}),e._v(" "),n("el-dropdown",[n("span",{staticClass:"el-dropdown-link",on:{click:e.changeGroupOpened}},[n("span",{staticClass:"field-group__name"},[e._v(e._s(e.group.name))]),e._v(" "),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[e._l(e.columnPresets,(function(t){return-1!==t.groups.indexOf(e.group.name)?n("el-dropdown-item",{key:"columnPreset"+t.name},[n("ColumnPresetButton",{attrs:{preset:t},on:{click:function(n){return e.setPreset(t)}}})],1):e._e()})),e._v(" "),e._l(e.filterPresets,(function(t){return-1!==t.groups.indexOf(e.group.name)?n("el-dropdown-item",{key:t.name},[n("FilterPresetButton",{attrs:{preset:t}})],1):e._e()})),e._v(" "),e._l(e.group.fields,(function(t){return n("el-dropdown-item",{key:t.name},[n("ColumnField",{class:{active:e.$store.getters.fieldExists(t)},attrs:{field:t,checked:e.$store.getters.fieldExists(t)},on:{click:function(n){return e.$emit("toggleField",t)}}})],1)}))],2)],1)],1),e._v(" "),n("div",{staticClass:"field-group__selected-fields"},e._l(e.group.fields,(function(t){return e.$store.getters.fieldExists(t)&&!e.opened?n("ColumnField",{key:t.name,class:{active:e.$store.getters.fieldExists(t)},attrs:{field:t,checked:e.$store.getters.fieldExists(t)},on:{click:function(n){return e.$emit("toggleField",t)}}}):e._e()})),1),e._v(" "),n("div",{class:{"field-group__content":!0,collapse:!e.opened}},[e._l(e.columnPresets,(function(t){return-1!==t.groups.indexOf(e.group.name)?n("span",{key:"columnPreset"+t.name},[n("ColumnPresetButton",{attrs:{preset:t},on:{click:function(n){return e.setPreset(t)}}})],1):e._e()})),e._v(" "),e._l(e.filterPresets,(function(t){return-1!==t.groups.indexOf(e.group.name)?n("span",{key:t.name},[n("FilterPresetButton",{attrs:{preset:t}})],1):e._e()})),e._v(" "),e._l(e.group.fields,(function(t){return n("ColumnField",{key:"content"+t.name,class:{"available-fields__field":!0,active:e.$store.getters.fieldExists(t)},attrs:{field:t,checked:e.$store.getters.fieldExists(t)},on:{click:function(n){return e.$emit("toggleField",t)}}})}))],2)])}),[],!1,null,null,null).exports,k=(n(789),n(790),n(791),{components:{FieldGroup:C},data:function(){return{fieldGroupsOpened:{},completionProcess:!1,fieldQuery:""}},computed:{tests:function(){return this.$store.state.tests},fields:function(){return this.$store.state.fields},availableFields:function(){return this.$store.state.availableFields},allFields:function(){return this.$store.state.allFields},filteredItems:function(){return this.$store.state.filteredItems},fieldGroups:function(){var e={unnamed:{name:"[без группы]",fields:[]}};for(var i in this.availableFields){var t=this.availableFields[i],n=this.tests[t.name];if(n&&n.groups){var r=Array.isArray(n.groups)?n.groups:[n.groups];for(var g in r){var o=r[g];o in e||(e[o]={name:o,fields:[]}),e[o].fields.push(t)}}else e.unnamed.fields.push(t)}return e}},methods:{changeGroupOpened:function(e){this.fieldGroupsOpened[e.name]=!(e.name in this.fieldGroupsOpened)||!this.fieldGroupsOpened[e.name],this.$forceUpdate()},changeGroupOpenedAll:function(){var e=this,t=!this.$store.state.openGroups;this.$store.commit("openGroups",t),Object.keys(this.fieldGroups).forEach((function(n){e.fieldGroupsOpened[n]=t})),this.$forceUpdate()},setPreset:function(e){this.$emit("setFields",e.columns)},toggleField:function(e){this.$emit("toggleField",e)},fieldIndex:function(e){return this.fields.findIndex((function(t){return e&&t.name==e.name}))},fieldComplete:function(q,e){var t=this;if(!q||this.completionProcess)return e([]);this.completionProcess=!0,setTimeout((function(){t.completionProcess=!1}),500),e((this.$store.state.availableFields.length>0?this.$store.state.availableFields:this.allFields).filter((function(filter){return filter.name.includes(q)||filter.comment&&filter.comment.toLowerCase().includes(q.toLowerCase())})).sort((function(a,b){return a.name>b.name?1:b.name>a.name?-1:0})))},fieldSelect:function(e){var t=this;this.$refs.input.focus(),this.fieldQuery="",e&&this.toggleField(e),setTimeout((function(){t.completionProcess=!1}),500)}}}),P=(n(792),Object(h.a)(k,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-toolbar"},[n("div",{staticClass:"available-fields"},[n("button",{staticClass:"column-presets__button_expand-all column-presets__button column-presets__button_icon",on:{click:e.changeGroupOpenedAll}},[this.$store.state.openGroups?[n("icon",{attrs:{name:"minus-square"}}),e._v(" "),n("span",[e._v("collapse all")])]:[n("icon",{attrs:{name:"plus-square"}}),e._v(" "),n("span",[e._v("expand all")])]],2),e._v(" "),n("br"),n("br"),e._v(" "),n("button",{staticClass:"column-presets__button_show-all column-presets__button column-presets__button_icon",on:{click:function(t){e.setPreset({name:"none",columns:e.availableFields.map((function(e){return e.name}))})}}},[n("icon",{attrs:{name:"check-double"}}),e._v(" "),n("span",[e._v("show all columns")])],1),e._v(" "),n("button",{staticClass:"column-presets__button column-presets__button_icon",on:{click:function(t){return e.setPreset({name:"none",columns:[e.$store.state.defaultField]})}}},[e._v("✖ "),n("span",[e._v("remove all columns")])]),e._v(" "),e._l(e.fieldGroups,(function(t){return t.fields.length>0?n("FieldGroup",{key:t.name,attrs:{group:t,opened:e.fieldGroupsOpened[t.name]||e.$store.state.openGroups},on:{changeGroupOpened:function(n){return e.changeGroupOpened(t)},toggleField:e.toggleField,setPreset:e.setPreset}}):e._e()})),e._v(" "),n("el-autocomplete",{ref:"input",staticClass:"field-search field-add-input",attrs:{placeholder:"add column",title:"Field search","fetch-suggestions":e.fieldComplete,valueKey:"name",clearable:!0},on:{select:e.fieldSelect},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"query-input__field-name"},[e._v(e._s(t.item.name))]),e._v(" "),n("span",{staticClass:"query-input__field-label"},[e._v(e._s(t.item.comment))])]}}]),model:{value:e.fieldQuery,callback:function(t){e.fieldQuery=t},expression:"fieldQuery"}})],2),e._v(" "),n("div",{staticClass:"total"},[e._v("\n    total: "+e._s(e.filteredItems.length)+"\n  ")])])}),[],!1,null,null,null).exports),O=(n(266),n(781)),j=n.n(O),F=(f={data:function(){return{q:"",lastQ:"",currentPart:"",completionProcess:!1}},computed:{tests:function(){return this.$store.state.tests},allFields:function(){return this.$store.state.allFields},globalQ:function(){return this.$store.state.q},queryParts:function(){return this.$store.state.q.split("&")},filterWidth:function(){return 8*(this.q.length+1)+45}},watch:{q:function(e){this.lastQ=this.q},globalQ:function(){this.q=this.globalQ}},created:function(){},methods:{queryChangeAction:function(){this.completionProcess?this.completionProcess=!1:this.$store.dispatch("q",this.q)},setPreset:function(e){this.$emit("setFields",e.columns)},toggleField:function(e){this.$emit("toggleField",e)},fieldIndex:function(e){return this.fields.findIndex((function(t){return e&&t.name==e.name}))},queryComplete:function(q,e){var t=this;if(!this.q||this.completionProcess)return e([]);var n=this.q.split("&"),r=n[n.length-1];if(this.completionProcess=!0,setTimeout((function(){t.completionProcess=!1}),500),r.match(/[<=>]/)){this.currentPart="value";var o=r.match(/(.*?)[<=>]/)[1],l=(this.allFields.filter((function(filter){return filter.name==o})),r.match(/=(.*)/)),c=l?l[1]:"";new RegExp(c,"i");e((this.$store.state.filteredItems.length>0?this.$store.state.filteredItems:this.$store.state.items).map((function(e){if(!c||e[o]&&e[o].toString().includes(c))return e[o]})).filter((function(e,i,a){return a.indexOf(e)===i})).sort().map((function(e){return{name:e}})))}else{this.currentPart="name",e((this.$store.state.availableFields.length>0?this.$store.state.availableFields:this.allFields).filter((function(filter){return filter.name.includes(r)})).sort((function(a,b){return a.name>b.name?1:b.name>a.name?-1:0})))}},querySelect:function(q){var e=this;this.$refs.input.focus();var t=this.lastQ.split("&");"name"==this.currentPart&&(t[t.length-1]=q.name),"value"==this.currentPart&&(t[t.length-1]=t[t.length-1].replace(/=.*/,"")+"="+q.name),this.q=t.join("&"),setTimeout((function(){e.completionProcess=!1}),500),"value"==this.currentPart&&this.queryChangeAction()},handleTagClose:function(e){this.q=this.q.replace(e+"&","").replace("&"+e,"").replace(e,""),this.queryChangeAction()},tagName:function(e){var t=e.replace(/=1$/,"").replace(/([<=>])/," $1 "),n=e.match(/^([a-z0-9_]+)(.*)/);if(n){var r=n[1],o=n[2].replace(/([<=>])/," $1 "),l=this.tests[r];l&&(l.comment&&(r=l.comment),"boolean"==l.type&&(o=o.replace("0","нет").replace("1","да").replace(" = ",": ")),t=r+o)}return t}}},Object(o.a)(f,"created",(function(){var e=this;this.$nuxt.$on("inputFocus",(function(){e.$refs.input&&e.$refs.input.focus()}))})),Object(o.a)(f,"mounted",(function(){this.q=this.$store.state.q})),f),T=(n(794),Object(h.a)(F,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"query-input"},[n("el-autocomplete",{ref:"input",staticClass:"filter__query",style:{width:e.filterWidth+"px"},attrs:{placeholder:"query",title:"Например:\n\nengine=bitrix&prod=1\n\nsite_template~/aspro-.*/\n\nmeta_year!=2019","fetch-suggestions":e.queryComplete,valueKey:"name",clearable:!0},on:{select:e.querySelect,clear:e.queryChangeAction},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.queryChangeAction(t)}},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",{staticClass:"query-input__field-name"},[e._v(e._s(t.item.name))]),e._v(" "),n("span",{staticClass:"query-input__field-label"},[e._v(e._s(t.item.comment))])]}}]),model:{value:e.q,callback:function(t){e.q=t},expression:"q"}}),e._v(" "),n("div",{staticClass:"filter__query-tags"},e._l(e.queryParts,(function(t){return""!=t?n("el-tag",{key:t,attrs:{closable:"","disable-transitions":!0},on:{close:function(n){return e.handleTagClose(t)}}},[e._v(e._s(e.tagName(t)))]):e._e()})),1)],1)}),[],!1,null,null,null).exports);function S(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function U(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?S(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):S(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var I={components:{FilterPresetButton:_},props:["item"],computed:{tests:function(){return this.$store.state.tests},groups:function(){var e={unnamed:{name:"",fields:[]}};for(var t in this.item){var n=this.item[t];if("object"!==Object(l.a)(n)&&""!==n){var r=this.tests[t];if(r&&r.groups){r.value=n;var o=Array.isArray(r.groups)?r.groups:[r.groups];r.validateClass=this.getColumnValidateClass(n,r.validate);var c=void 0;for(var g in t.match(/url/i)&&(c='<a href="'.concat(n,'" target="_blank">').concat(n,"</a>")),"boolean"==r.type&&(c=parseInt(n)?"yes":"no"),"string"==typeof n&&("image"===r.type||n.match(/^http.*\.(jpg|jpeg|png|gif)$/))&&n&&(c='<img alt="error loading image" style="width: 150px; height: auto;" src="'.concat(n,'" title="').concat(n,'"/>')),r.valueText=c,o){console.log("g: ",g);var d=o[g];d in e||(e[d]={name:d,fields:[]});var f=U({},r);0!=g&&(f.validateClass+=" secondary group-"+d),e[d].fields.push(f)}}}}return e}},methods:{getColumnValidateClass:function(e,t){return this.$store.getters.getColumnValidateClass(e,t)}}},V=(n(796),Object(h.a)(I,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item-details"},[e.item.url?n("a",{staticClass:"item-details__title",attrs:{href:e.item.url,target:"_blank"}},[e._v(e._s(e.item.url))]):e._e(),e._v(" "),n("div",{staticClass:"item-details__groups"},e._l(e.groups,(function(t){return n("a",{key:t.name,staticClass:"item-details__groups-link",attrs:{href:"#"+e.item[e.$store.state.defaultField]+"-"+t.name}},[e._v(e._s(t.name))])})),0),e._v(" "),e._l(e.groups,(function(t){return n("div",{key:t.name,staticClass:"item-details__group",attrs:{id:e.item[e.$store.state.defaultField]+"-"+t.name}},[n("div",{staticClass:"item-details__group-name"},[e._v(e._s(t.name))]),e._v(" "),n("ul",{staticClass:"item-details__group-fields"},e._l(t.fields,(function(t){return n("li",{key:t.name,class:t.validateClass,attrs:{title:t.name}},[n("span",{staticClass:"item-details__label"},[e._v(e._s(t.comment||t.name))]),e._v(" "),n("span",{staticClass:"item-details__value",domProps:{innerHTML:e._s(t.valueText||t.value)}}),e._v(" "),(t.type,n("FilterPresetButton",{staticClass:"field-preset",attrs:{preset:{q:t.name+"="+t.value},append:""}},[n("icon",{attrs:{name:"filter",scale:"0.6"}})],1))],1)})),0)])}))],2)}),[],!1,null,null,null).exports),E={components:{},props:["icon","title","name"],computed:{tests:function(){return this.$store.state.tests}},methods:{}},A=(n(798),Object(h.a)(E,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-collapse-item",{staticClass:"panels__panel",attrs:{name:e.name}},[n("template",{slot:"title"},[e.icon?n("i",{class:e.icon}):e._e(),e._v(" "),n("span",{staticClass:"panel__title",domProps:{innerHTML:e._s(e.title)}})]),e._v(" "),e._t("default")],2)}),[],!1,null,null,null).exports);function J(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var M={components:{FilterPresetButton:_},data:function(){return{fieldGroupsOpened:{},completionProcess:!1,fieldQuery:""}},computed:{stats:function(){var e,t=this,n=[],r=J(this.availableFields);try{var o=function(){var r=e.value;if(!(r=t.tests[r.name]))return"continue";var o="",l=[],c="",d="";if(["lighthouse_scores_performance","lighthouse_scores_pwa","lighthouse_scores_accessibility","lighthouse_scores_best-practices","lighthouse_scores_seo","lighthouse_first-contentful-paint","lighthouse_speed-index","lighthouse_largest-contentful-paint","lighthouse_interactive","lighthouse_total-blocking-time","lighthouse_cumulative-layout-shift","request_time","dom_size","html_size","text_ratio_percent"].includes(r.name)){var f,m=0,h=J(t.filteredItems);try{for(h.s();!(f=h.n()).done;){var _=f.value;m+=parseInt(_[r.name])}}catch(e){h.e(e)}finally{h.f()}o=Math.round(m/t.filteredItems.length),d=t.getColumnValidateClass(o,r.validate),c=o+" (average)"}if(["status","canonical_count","is_canonical","h1_count","engine","site_template"].includes(r.name)){var v,y={},x=J(t.filteredItems);try{for(x.s();!(v=x.n()).done;){var w=v.value[r.name];[null,void 0,""].includes(w)||(y[w]?y[w]+=1:y[w]=1)}}catch(e){x.e(e)}finally{x.f()}var $=[];for(var C in y){var k=y[C],P=t.getColumnValidateClass(C,r.validate);"danger"===P||"warning"===P&&"danger"!==d?d=P:d||(d=P),"boolean"===r.type&&(C=parseInt(C)?"yes":"no"),l.push({validateClass:P,value:C,count:k}),$.push('<span class="item-details__subvalue '.concat(P,'">').concat(C,": ").concat(k,"</span>")),d="item-details__value_has-subvalues "+d}o=$.join("<br>")}if(["title","description","h1","keywords"].includes(r.name)){var O=function(e){for(var t=e.slice().sort(),n=[],i=0;i<t.length-1;i++)t[i+1]==t[i]&&n.push(t[i]);return n}(t.filteredItems.map((function(e){return e[r.name]})));o=O.length,d=O.length>0?"warning":"success",c=O.length>0?"".concat(O.length," non-unique values"):"all unique"}o&&n.push({name:r.name,title:r.comment||r.name,class:d,value:'<span class="item-details__subvalue-text">'+(c||o)+"</span>",subvalues:l})};for(r.s();!(e=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}return n},availableFields:function(){return this.$store.state.availableFields},tests:function(){return this.$store.state.tests},filteredItems:function(){return this.$store.state.filteredItems},fields:function(){return this.$store.state.fields}},methods:{getColumnValidateClass:function(e,t){return this.$store.getters.getColumnValidateClass(e,t)}}},z=(n(800),Object(h.a)(M,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table-stats item-details"},[n("ul",e._l(e.stats,(function(t){return n("li",{key:t.name,class:["table-stats__field",t.class]},[n("span",{staticClass:"table-stats__field-name item-details__label",domProps:{innerHTML:e._s(t.title)}}),e._v(" "),0===t.subvalues.length?n("span",{staticClass:"table-stats__field-value item-details__value",domProps:{innerHTML:e._s(t.value)}}):n("span",{staticClass:"table-stats__field-value item-details__value"},e._l(t.subvalues,(function(r){var o;return n("div",{key:r.value,class:(o={"item-details__subvalue":!0},o[r.validateClass]=!0,o)},[n("span",{staticClass:"item-details__subvalue-text"},[e._v(e._s(r.value)+": "+e._s(r.count))]),e._v(" "),n("FilterPresetButton",{staticClass:"field-preset",attrs:{preset:{q:t.name+"="+r.value},toggle:"","no-count":""}},[n("icon",{attrs:{name:"filter",scale:"0.6"}})],1)],1)})),0)])})),0)])}),[],!1,null,null,null).exports);n(802);function B(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var L={components:{},computed:{itemsJsonUrl:{get:function(){return this.$store.state.itemsJsonUrl},set:function(e){this.$store.commit("itemsJsonUrl",e)}},currentJsonSort:{get:function(){return this.$store.state.currentJsonSort},set:function(e){this.$store.commit("currentJsonSort",e)}},options:function(){var e=[];for(var t in this.jsonUrlHistory){var data=this.jsonUrlHistory[t];e.push({url:t,used:data.used,added:data.added})}var n=this.currentJsonSort,r=["added","used"].includes(n);return e.sort((function(a,b){var e=0;return e=a[n]===b[n]?0:a[n]>b[n]?1:-1,r&&(e*=-1),e}))},jsonUrlHistory:function(){return this.$store.state.jsonUrlHistory},jsonUrlHistoryCount:function(){return Object.entries(this.jsonUrlHistory).length},isCurrentJsonInHistory:function(){return void 0!==this.jsonUrlHistory[this.itemsJsonUrl]},shareProdUrl:function(){return"https://viasite.github.io/site-audit-seo-viewer/?url=".concat(this.itemsJsonUrl)}},methods:{removeCurrentFromHistory:function(){var e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},this.jsonUrlHistory);e[this.itemsJsonUrl]&&(delete e[this.itemsJsonUrl],this.$store.commit("jsonUrlHistory",e))},getShareUrl:function(e){return this.$router.options.base+"?url=".concat(e)}}},Q=(n(803),Object(h.a)(L,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.jsonUrlHistoryCount>1?n("div",{staticClass:"report-history"},[n("el-radio-group",{staticClass:"report-history__sort",attrs:{size:"mini"},model:{value:e.currentJsonSort,callback:function(t){e.currentJsonSort=t},expression:"currentJsonSort"}},[n("el-radio-button",{attrs:{label:"url"}},[e._v("name")]),e._v(" "),n("el-radio-button",{attrs:{label:"added"}},[e._v("date")]),e._v(" "),n("el-radio-button",{attrs:{label:"used"}},[e._v("last used")])],1),e._v(" "),n("el-select",{staticClass:"report-history__select",attrs:{size:"mini",filterable:"",placeholder:"Report URL"},model:{value:e.itemsJsonUrl,callback:function(t){e.itemsJsonUrl=t},expression:"itemsJsonUrl"}},e._l(e.options,(function(option){return n("el-option",{key:option.url,staticClass:"report-history__option",attrs:{value:option.url}},[n("a",{staticClass:"report-history__value-name",attrs:{href:e.getShareUrl(option.url)},on:{click:function(e){e.preventDefault()}}},[e._v(e._s(option.url.replace("https://site-audit.viasite.ru/reports/","")))]),e._v(" "),n("span",{staticClass:"report-history__value-date"},[e._v(e._s(new Date(option.added).toLocaleString()))])])})),1),e._v(" "),n("button",{class:{"input-clear":!0,hidden:!e.isCurrentJsonInHistory},attrs:{title:"Remove current report from history"},on:{click:e.removeCurrentFromHistory}},[e._v("✗")]),e._v(" "),n("a",{attrs:{href:e.itemsJsonUrl,target:"_blank"}},[e._v("json")]),e._v(",\n  "),n("a",{attrs:{href:e.getShareUrl(e.itemsJsonUrl),target:"_blank"}},[e._v("share")]),e._v(" "),"/"==e.$router.options.base?[e._v("\n    , "),n("a",{attrs:{href:e.shareProdUrl,target:"_blank"}},[e._v("prod")])]:e._e()],2):e._e()}),[],!1,null,null,null).exports),G=(n(805),n(806)),D=n.n(G);function N(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(c)throw o}}}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function W(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}var X={components:{Toolbar:P,ItemDetails:V,QueryInput:T,Stats:z,Panel:A,ReportHistory:Q,ColumnField:w,ColumnPresetButton:y,FilterPresetButton:_},data:function(){return{routerProcess:!1,tests:this.$store.state.tests,jsonLoadError:!1,jsonLoading:!0,openedPanels:[],sort:{},introTourSteps:[{target:".column-presets__button_expand-all",content:"Show all fields list.",offset:-100},{target:".column-presets__button_show-all",content:"Add all fields to table (or remove).",offset:-200},{target:".field-add-input",content:"Search field by name and add to table.",offset:-200},{target:".filter__query",content:"Query filter, with autocomplete, regexp, and/or conditionals.",offset:-200},{target:".filter-presets",content:"Use filters to quick get needed data.",offset:-200},{target:".column-presets",content:"Use column presets for get scoped columns.",offset:-200},{target:".table-stats",content:"Stats by filtered rows: average, non-unique, enum values.",offset:-200},{target:".current-columns",content:"Quick remove current table columns.",offset:-200},{target:".VueTables__search-field",content:"Search by main column",offset:-200},{target:".VueTables__row ",content:"Click to row for open item details ",offset:-200}]}},computed:{q:function(){return this.$store.state.q},itemsJsonUrl:function(){return this.$store.state.itemsJsonUrl},fields:function(){return this.$store.state.fields},availableFields:function(){return this.$store.state.availableFields},filteredItems:function(){return this.$store.state.filteredItems},filterPresets:function(){return this.$store.state.filterPresets},columnPresets:function(){return this.$store.state.columnPresets},displayMode:{get:function(){return this.$store.state.displayMode},set:function(e){this.$store.commit("displayMode",e)}},showHumanColumns:{get:function(){return this.$store.state.showHumanColumns},set:function(e){this.$store.commit("showHumanColumns",e)}},fieldsWithoutComments:function(){return this.$store.state.fields.map((function(e){return delete(e=function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?W(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):W(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},e)).comment,e}))},tableOptions:function(){var e,t=this,n={},r=N(this.columns);try{for(r.s();!(e=r.n()).done;){var o=e.value;n[o]="col-"+o}}catch(e){r.e(e)}finally{r.f()}var l,c={},d={warning:"warning",error:"danger"},f=N(this.columns);try{var m=function(){var e=l.value,n=t.fields.find((function(t){return t.name==e}));if(!n)return"continue";var r=[];r.push({class:"cell",condition:function(){return!0}}),n.default&&r.push({class:"col-default",condition:function(){return!0}}),n.align?r.push({class:"align-"+n.align,condition:function(){return!0}}):("string"===n.type&&r.push({class:"align-left",condition:function(){return!0}}),["integer","boolean","time"].includes(n.type)&&r.push({class:"align-center",condition:function(){return!0}})),n.validate&&function(){for(var o=n.validate,l=0,c=["success","warning","error"];l<c.length;l++){var f=c[l];o[f]&&"string"!=typeof o[f]&&(console.log("".concat(e,": only strings should be in field.validate.").concat(f,", given: "),o[f]),delete o[f])}for(var m=function(){var n=_[h];if(!o[n])return"continue";r.push({class:d[n],condition:function(r){var l=r[e];return t.getValidateFunc(o[n])(l)}})},h=0,_=["warning","error"];h<_.length;h++)m();(o.warning||o.error)&&r.push({class:"success",condition:function(n){var r=n[e];return!t.getValidateFunc(o.warning)(r)&&!t.getValidateFunc(o.error)(r)&&!["",NaN,null,void 0].includes(r)}})}(),c[e]=r};for(f.s();!(l=f.n()).done;)m()}catch(e){f.e(e)}finally{f.f()}return{headings:this.headings,headingsTooltips:this.headingsTooltips,filterable:[this.$store.state.defaultField],cellClasses:c,columnsClasses:n,perPage:Math.min(1e3,this.filteredItems.length),perPageValues:[50,100,250,500,1e3,5e3],rowClassCallback:function(e){if(e.error)return"danger"},templates:{}}},columns:function(){return this.fields.map((function(e){return e.name}))},headings:function(){var e=this,t={};return this.fields.forEach((function(n){e.showHumanColumns?t[n.name]=n.comment||n.title.split("_").join(" ")||n.name:t[n.name]=n.title.split("_").join(" ")||n.name})),t},headingsTooltips:function(){var e={};return this.fields.forEach((function(t){e[t.name]=t.name+(t.comment?"\n\n".concat(t.comment):"")+(t.description?"\n\n".concat(t.description):"")})),e},pageTitle:function(){var title=["site-audit-seo"];return this.q&&title.push("q: "+this.q),this.fields.length>0&&title.push("fields: "+this.columns),title.join(", ")},isNewUser:function(){return this.$store.state.visitCount<this.$store.state.newUserVisits}},watch:{q:function(){var e=this;this.updateUrlQuery(),this.q.split("&").forEach((function(t){var n=t.match(/^[a-zA-Z0-9_]+/);n&&e.addFieldByName(n[0])}))},itemsJsonUrl:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.changeJsonUrl(e.itemsJsonUrl,!0);case 2:case"end":return t.stop()}}),t)})))()},displayMode:function(e){"view"==e&&(this.openedPanels=[]),"edit"==e&&(this.openedPanels=["columns","filter_presets","column_presets","stats"])}},methods:{formatExcelCols:function(e){for(var t=Object.keys(e[0]).map((function(e){return{width:e.length+2}})),i=0;i<e.length;i++)for(var n=Object.values(e[i]),r=0;r<n.length;r++)null!==n[r]&&void 0!==t[r]&&n[r].length>t[r].width&&(t[r].width=n[r].length);return t},buildXlsx:function(){for(var table=this.$el.querySelector(".VueTables__table"),e=D.a.utils.table_to_book(table),t=e.Sheets[e.SheetNames[0]],n=t["!ref"].split(":")[1],r=D.a.utils.decode_range("B1:"+n),o=[1],l=0;l<=r.e.r;l++){delete t[D.a.utils.encode_cell({r:l,c:0})];for(var c=1;c<=r.e.c;c++){var d=D.a.utils.encode_cell({r:l,c:c}),f=Object.values(t[d].v).length+2;o[c]?o[c]=Math.max(o[c],f):o[c]=f}}var m=o.map((function(e){return{width:e}}));return t["!cols"]=m,t["!autofilter"]={ref:"B1:"+n},e},getXlsx:function(){var e=this.buildXlsx(),t=this.q?"--"+this.q.replace(/&/g,","):"",n="site-audit-seo".concat(t,".xlsx");D.a.writeFile(e,n,{})},toggleField:function(e,t){this.$store.dispatch("toggleField",{field:e,add:t}),this.updateUrlQuery()},updateUrlQuery:function(){var e=this;if(!this.routerProcess){this.routerProcess=!0,setTimeout((function(){e.routerProcess=!1}),100);var t={};this.q&&(t.q=this.q),t.fields=this.columns.join(","),t.url=this.itemsJsonUrl;var n={column:!1,ascending:!0};this.$refs.table&&this.$refs.table.orderBy.column&&(n=this.$refs.table.orderBy,this.sort=this.$refs.table.orderBy),!n.column&&this.sort.column&&(n=this.sort),n&&n.column&&(t.sort=n.column+(n.ascending?"":",-")),this.$router.push({query:t})}},onTableLoaded:function(){this.$refs.table&&this.sort.column&&(this.$refs.table.setOrder(this.sort.column,this.sort.ascending),setTimeout(this.updateUrlQuery,100))},toggleFieldByName:function(e){var t=this.availableFields.find((function(t){return t.name==e}));this.toggleField(t)},addFieldByName:function(e){var t=this.availableFields.find((function(t){return t.name==e}));t&&this.toggleField(t,!0)},setFields:function(e){var t,n=this,r=[],o=N(e=j.a.uniq(e));try{var l=function(){var e=t.value,o=n.availableFields.find((function(t){return t.name==e}));o&&r.push(o)};for(o.s();!(t=o.n()).done;)l()}catch(e){o.e(e)}finally{o.f()}this.$store.commit("fields",r),this.updateUrlQuery()},setPreset:function(e){this.setFields(e.columns)},fieldIndex:function(e){return this.fields.findIndex((function(t){return e&&t.name==e.name}))},getValidateFunc:function(e){return this.$store.getters.getValidateFunc(e)},getColumnValue:function(e,t){var n=t.split(".").reduce((function(e,i){return e?e[i]:""}),e);if(["",void 0,null].includes(n))return n;var r=this.fields.find((function(e){return e.name==t}));if("integer"===r.type&&n&&(n=(new Intl.NumberFormat).format(n)),"timestamp"===r.type&&n){var o=6e4*(new Date).getTimezoneOffset();n=(n=new Date(1e3*n-o).toISOString()).replace("T"," ").replace(/\..*/,"")}if(t.match(/url/i)&&(n='<a href="'.concat(n,'" target="_blank">').concat(n,"</a>")),"favicon"===t&&(n=n.replace(/^\//,e.url),n='<img style="width:16px;height:16px" src="'.concat(n,'"/>')),"domain_idn"===t){var l=e.favicon?e.favicon.replace(/^\//,e.url):"";if(l=l?'<img style="width:16px;height:16px" src="'.concat(l,'"/>'):"",n='<a href="'.concat(e.url,'" target="_blank">').concat(l," ").concat(n,"</a>"),e.ssh_command){var c="ssh://"+e.ssh_command.replace("ssh ","");n+='<a href="'.concat(c,'" class="ssh-link float-right" title="Open SSH">ssh</a>')}}return"string"==typeof n&&("image"===r.type||n.match(/^http.*\.(jpg|jpeg|png|gif)$/))&&n&&(n='<img alt="error loading image" style="width: 150px; height: auto;" src="'.concat(n,'" title="').concat(n,'"/>')),"boolean"===r.type&&(n=parseInt(n)?"yes":"no"),n},setDefaultFields:function(){var e=[];for(var i in this.$store.state.columnPresets){var t=this.$store.state.columnPresets[i];if(t.default){e=t.columns;break}}0===e.length&&this.$store.state.columnPresets.default&&(e=this.$store.state.columnPresets.default.columns),this.setFields(e)},sortStrToObj:function(e){if(!e)return{column:!1,ascending:!0};var t=e.split(",");return 1==t.length&&t.push("+"),{column:t[0]||!1,ascending:"-"!=t[1]}},fieldsInit:function(){this.$route.query.fields?this.setFields(this.$route.query.fields.split(",")):this.setDefaultFields(),this.$route.query.sort&&(this.sort=this.sortStrToObj(this.$route.query.sort),this.onTableLoaded())},changeJsonUrl:function(e,t){var n=this;return Object(r.a)(regeneratorRuntime.mark((function r(){var o,l;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n.jsonLoadError=!1,n.jsonLoading=!0,n.$store.commit("filteredItems",[]),r.prev=3,r.next=6,n.$axios.$get(e);case 6:o=r.sent,n.$store.commit("columnPresets",o.columns),n.$store.commit("filterPresets",o.filters),n.$store.commit("tests",o.fields),n.$store.dispatch("items",o.items),(l=o.filters.find((function(filter){return filter.default})))&&!n.$route.query.q&&(n.$route.query.q=l.q),n.$store.dispatch("q",n.$route.query.q),t&&n.setDefaultFields(),n.jsonLoadError=!1,n.jsonLoading=!1,r.next=23;break;case 19:r.prev=19,r.t0=r.catch(3),n.jsonLoadError=!0,n.jsonLoading=!1;case 23:case"end":return r.stop()}}),r,null,[[3,19]])})))()},rowClick:function(e){this.$refs.table.toggleChildRow(e.row.id)},startIntroTour:function(){this.displayMode="edit",this.$tours.introTour.start()}},created:function(){var e=this;this.$nuxt.$on("inputFocus",(function(){e.openedPanels.includes("filter_presets")||e.openedPanels.push("filter_presets")})),this.$nuxt.$on("sort",(function(t){e.sort=e.sortStrToObj(t),e.onTableLoaded()}))},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.$store.commit("visitCount",e.$store.state.visitCount+1),e.$route.query.url&&e.$store.commit("itemsJsonUrl",e.$route.query.url),t.next=4,e.changeJsonUrl(e.itemsJsonUrl,!1);case 4:e.fieldsInit(),e.$router.afterEach((function(t,n){e.routerProcess||(e.$route.query.q?e.$store.dispatch("q",e.$route.query.q):e.$store.dispatch("q",""),e.fieldsInit())}));case 6:case"end":return t.stop()}}),t)})))()},head:function(){return{title:this.pageTitle}}},K=(n(810),Object(h.a)(X,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container",class:["mode-"+e.displayMode]},[n("v-tour",{attrs:{name:"introTour",steps:e.introTourSteps,options:{highlight:!0}}}),e._v(" "),n("header",[n("el-button",{staticClass:"help-tour-button",attrs:{plain:!e.isNewUser,type:e.isNewUser?"primary":"",size:e.isNewUser?"":"mini"},on:{click:e.startIntroTour}},[e._v("Help tour")]),e._v(" "),n("el-radio-group",{staticClass:"display-mode-switch",attrs:{size:"mini"},model:{value:e.displayMode,callback:function(t){e.displayMode=t},expression:"displayMode"}},[n("el-radio-button",{attrs:{label:"view"}},[e._v("view")]),e._v(" "),n("el-radio-button",{attrs:{label:"edit"}},[e._v("edit")])],1),e._v(" "),n("ReportHistory"),e._v(" "),n("div",{staticClass:"total"},[e._v("total: "+e._s(e.filteredItems.length))])],1),e._v(" "),n("br"),e._v(" "),e.jsonLoadError?n("div",[n("div",{staticClass:"msg danger"},[e._v("Failed to load "+e._s(e.itemsJsonUrl))])]):e._e(),e._v(" "),e.jsonLoading?n("div",[e._v("Loading...")]):e._e(),e._v(" "),e.jsonLoading||e.jsonLoadError?e._e():n("div",[n("el-collapse",{staticClass:"panels",model:{value:e.openedPanels,callback:function(t){e.openedPanels=t},expression:"openedPanels"}},[n("Panel",{attrs:{title:"columns explorer",icon:"el-icon-folder-opened",name:"columns"}},[n("Toolbar",{on:{toggleField:e.toggleField,setFields:e.setFields}})],1),e._v(" "),n("Panel",{attrs:{title:"filters",icon:"el-icon-search",name:"filter_presets"}},[n("div",{staticClass:"filter-presets"},e._l(e.filterPresets,(function(e){return n("FilterPresetButton",{key:e.name,attrs:{preset:e,toggle:""}})})),1),e._v(" "),n("QueryInput",{staticClass:"filter__query"})],1),e._v(" "),n("Panel",{attrs:{title:"column presets",icon:"el-icon-menu",name:"column_presets"}},[n("div",{staticClass:"column-presets"},e._l(e.columnPresets,(function(t){return n("ColumnPresetButton",{key:t.name,attrs:{preset:t},on:{click:function(n){return e.setPreset(t)}}})})),1)]),e._v(" "),n("Panel",{attrs:{title:"filtered stats",icon:"el-icon-s-data",name:"stats"}},[n("Stats")],1),e._v(" "),n("Panel",{staticClass:"current-columns",attrs:{title:"current columns",icon:"el-icon-caret-right",name:"current_columns"}},e._l(e.fieldsWithoutComments,(function(t){return n("ColumnField",{key:t.name,class:{"available-fields__field":!0,active:e.$store.getters.fieldExists(t)},attrs:{field:t,checked:e.$store.getters.fieldExists(t)},on:{click:function(n){return e.toggleField(t)}}})})),1)],1),e._v(" "),n("div",[n("br"),e._v("\n      total: "+e._s(e.filteredItems.length)+"\n    ")]),e._v(" "),n("div",{staticClass:"table-actions"},[n("el-checkbox",{staticClass:"human-columns-switch",model:{value:e.showHumanColumns,callback:function(t){e.showHumanColumns=t},expression:"showHumanColumns"}},[e._v("\n        Human column names\n      ")]),e._v(" "),n("button",{staticClass:"btn btn-excel",on:{click:e.getXlsx}},[n("icon",{attrs:{name:"file-excel"}}),e._v(" xlsx\n      ")],1)],1),e._v(" "),e.filteredItems.length>0?n("v-client-table",{ref:"table",attrs:{columns:e.columns,data:e.filteredItems,options:e.tableOptions},on:{"row-click":e.rowClick,sorted:e.updateUrlQuery},scopedSlots:e._u([{key:"child_row",fn:function(t){return[n("ItemDetails",{attrs:{item:e.$store.getters.getItemByDefaultField(t.row[e.$store.state.defaultField])}})]}},e._l(e.columns,(function(t){return{key:t,fn:function(r){return n("div",{key:t,domProps:{innerHTML:e._s(e.getColumnValue(r.row,t))}})}}}))],null,!0)}):e._e()],1)],1)}),[],!1,null,null,null));t.default=K.exports}}]);